<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="salao.db" readonly="0" foreign_keys="1" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="1000" synchronous="2"/><attached/><window><main_tabs open="browser pragmas query" current="2"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="100"/><column_width id="3" width="8163"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/></tab_structure><tab_browse><table title="profissionais" custom_title="0" dock_id="1" table="4,13:mainprofissionais"/><dock_state state="000000ff00000000fd00000001000000020000060400000380fc0100000001fb000000160064006f0063006b00420072006f00770073006500310100000000000006040000012200ffffff000002e40000000000000004000000040000000800000008fc00000000"/><default_encoding codec=""/><browse_table_settings><table schema="main" name="agendamento_servicos" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="32"/><column index="2" value="130"/><column index="3" value="87"/><column index="4" value="116"/><column index="5" value="54"/><column index="6" value="131"/><column index="7" value="98"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="profissionais" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="32"/><column index="2" value="123"/><column index="3" value="124"/><column index="4" value="171"/><column index="5" value="106"/><column index="6" value="44"/><column index="7" value="62"/><column index="8" value="132"/><column index="9" value="116"/><column index="10" value="98"/><column index="11" value="117"/><column index="12" value="130"/><column index="13" value="63"/><column index="14" value="96"/><column index="15" value="156"/><column index="16" value="68"/><column index="17" value="106"/><column index="18" value="85"/><column index="19" value="78"/><column index="20" value="61"/><column index="21" value="78"/><column index="23" value="107"/><column index="24" value="101"/><column index="25" value="115"/><column index="26" value="101"/><column index="27" value="90"/><column index="28" value="84"/><column index="29" value="71"/><column index="30" value="128"/><column index="31" value="106"/><column index="32" value="116"/><column index="33" value="115"/><column index="34" value="108"/><column index="35" value="120"/><column index="36" value="130"/><column index="37" value="116"/><column index="38" value="132"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="servicos_profissionais" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="32"/><column index="2" value="87"/><column index="3" value="116"/><column index="4" value="177"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table></browse_table_settings></tab_browse><tab_sql><sql name="SQL 1*">SELECT * FROM profissionais



SELECT id, nome, especialidade, telefone, email, status, cpf, funcao, comissao FROM profissionais

ALTER TABLE profissionais
RENAME COLUMN nome_completo TO nome;

PRAGMA table_info(profissionais);

CREATE TABLE horarios_trabalho (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    profissional_id INTEGER NOT NULL,
    dia_semana TEXT NOT NULL, -- 'segunda', 'terca', 'quarta', 'quinta', 'sexta', 'sabado', 'domingo'
    hora_inicio TIME,
    hora_fim TIME,
    disponivel BOOLEAN DEFAULT 1,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (profissional_id) REFERENCES profissionais(id) ON DELETE CASCADE,
    UNIQUE(profissional_id, dia_semana)
);

-- √çndices para melhor performance
CREATE INDEX idx_horarios_profissional ON horarios_trabalho(profissional_id);
CREATE INDEX idx_horarios_dia ON horarios_trabalho(dia_semana);


SELECT * from horarios_trabalho

DROP VIEW IF EXISTS vw_profissionais_completos;

ALTER TABLE profissionais DROP COLUMN horario_segunda;
ALTER TABLE profissionais DROP COLUMN horario_terca;
ALTER TABLE profissionais DROP COLUMN horario_quarta;
ALTER TABLE profissionais DROP COLUMN horario_quinta;
ALTER TABLE profissionais DROP COLUMN horario_sexta;
ALTER TABLE profissionais DROP COLUMN horario_sabado;
ALTER TABLE profissionais DROP COLUMN horario_domingo;

ALTER VIEW vw_profissionais_completos AS
SELECT
    p.id,
    p.nome,
    p.telefone,
    p.email,
    p.funcao,
    p.foto,
    p.status,
    p.comissao_padrao,
    p.data_admissao,
    p.data_demissao,
    p.motivo_demissao,
    p.cpf,
    p.data_nascimento,
    p.genero,
    p.estado_civil,
    p.endereco,
    p.numero,
    p.complemento,
    p.bairro,
    p.cidade,
    p.estado,
    p.cep,
    p.salario_base,
    p.tipo_contrato,
    p.banco_nome,
    p.banco_agencia,
    p.banco_conta,
    p.banco_tipo,
    p.pix_chave,
    p.pix_tipo,
    p.observacoes
FROM profissionais p;

PRAGMA table_info(profissionais);
SELECT * FROM vw_profissionais_completos LIMIT 5;

SELECT * from profissionais

UPDATE profissionais
SET 
	nome = &quot;gabriele barbosa cavalcante&quot;,
	comissao_padrao = 45,
    salario_base = 2800
WHERE id = 1

</sql><current_tab id="0"/></tab_sql></sqlb_project>
